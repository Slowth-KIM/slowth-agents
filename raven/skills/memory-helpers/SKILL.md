---
name: memory-helpers
description: BMAD ìŠ¤íƒ€ì¼ ì—ì´ì „íŠ¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ í—¬í¼ í•¨ìˆ˜ë“¤
---

# Memory Helpers

BMAD(Belief-Memory-Action-Dialogue) íŒ¨í„´ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ í—¬í¼ì…ë‹ˆë‹¤.

## íŒŒì¼ êµ¬ì¡°

```
.raven/state/
â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ belief.json      # ì—ì´ì „íŠ¸ ì‹ ë… ìƒíƒœ
â”‚   â”œâ”€â”€ working.json     # í˜„ì¬ ì‘ì—… ì»¨í…ìŠ¤íŠ¸
â”‚   â””â”€â”€ decisions/       # íƒœìŠ¤í¬ë³„ ì˜ì‚¬ê²°ì • ê¸°ë¡
â”‚       â””â”€â”€ {task_id}.json
â””â”€â”€ dialogue/            # íƒœìŠ¤í¬ë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬
    â””â”€â”€ {task_id}.json
```

---

## belief-load

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì—ì´ì „íŠ¸ì˜ í˜„ì¬ ì‹ ë… ìƒíƒœë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ì—ì´ì „íŠ¸ ì‹œì‘ ì‹œ

```bash
cat .raven/state/memory/belief.json
```

**ë°˜í™˜ êµ¬ì¡°**:
```json
{
  "updated_at": "ISO timestamp",
  "project": { "name", "type", "tech_stack", "structure_summary" },
  "codebase": { "key_files", "patterns", "conventions" },
  "current_focus": { "task_id", "understanding", "blockers" }
}
```

---

## belief-update

ì‹ ë… ìƒíƒœì˜ íŠ¹ì • í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **:
- ìƒˆë¡œìš´ ì½”ë“œë² ì´ìŠ¤ ì •ë³´ í•™ìŠµ ì‹œ
- íƒœìŠ¤í¬ í¬ì»¤ìŠ¤ ë³€ê²½ ì‹œ
- í”„ë¡œì íŠ¸ ì´í•´ê°€ ê¹Šì–´ì§ˆ ë•Œ

**í”„ë¡œì„¸ìŠ¤**:
1. `.raven/state/memory/belief.json` ì½ê¸°
2. í•´ë‹¹ í•„ë“œ ì—…ë°ì´íŠ¸
3. `updated_at` ê°±ì‹ 
4. íŒŒì¼ ì €ì¥

**ì˜ˆì‹œ ì—…ë°ì´íŠ¸**:
```json
{
  "current_focus": {
    "task_id": "session-persistence",
    "understanding": "BMAD ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ ì¤‘",
    "blockers": []
  }
}
```

---

## working-init

ìƒˆ ì„¸ì…˜ì„ ìœ„í•œ working memoryë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ìƒˆ íƒœìŠ¤í¬ êµ¬í˜„ ì‹œì‘ ì‹œ

**í”„ë¡œì„¸ìŠ¤**:
1. UUID ìƒì„± (ë˜ëŠ” timestamp ê¸°ë°˜ ID)
2. working.json ì´ˆê¸°í™”

**ì´ˆê¸° êµ¬ì¡°**:
```json
{
  "session_id": "{generated-uuid}",
  "agent": "raven-coding",
  "task_id": "{current_task_id}",
  "started_at": "{ISO timestamp}",
  "last_activity": "{ISO timestamp}",
  "plan": {
    "steps": [],
    "current_step": 0
  },
  "context": {
    "files_read": [],
    "files_modified": [],
    "key_findings": []
  },
  "notes": [],
  "handoff": null
}
```

---

## working-update

í˜„ì¬ ì„¸ì…˜ì˜ ì§„í–‰ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **:
- êµ¬í˜„ ë‹¨ê³„ ì™„ë£Œ ì‹œ
- íŒŒì¼ ì½ê¸°/ìˆ˜ì • ì‹œ
- ì¤‘ìš” ë°œê²¬ ì‹œ

**ì—…ë°ì´íŠ¸ ê°€ëŠ¥ í•„ë“œ**:
- `plan.steps[n].status`: "pending" | "in_progress" | "completed"
- `plan.current_step`: í˜„ì¬ ë‹¨ê³„ ë²ˆí˜¸
- `context.files_read`: ì½ì€ íŒŒì¼ ê²½ë¡œ ì¶”ê°€
- `context.files_modified`: ìˆ˜ì •í•œ íŒŒì¼ ê²½ë¡œ ì¶”ê°€
- `context.key_findings`: ì¤‘ìš” ë°œê²¬ ì¶”ê°€
- `notes`: ë©”ëª¨ ì¶”ê°€
- `last_activity`: í•­ìƒ ê°±ì‹ 

---

## working-load

ì´ì „ ì„¸ì…˜ì˜ working memoryë¥¼ ë¡œë“œí•˜ì—¬ ì¬ê°œí•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: `/raven:code resume` ì‹¤í–‰ ì‹œ

**í”„ë¡œì„¸ìŠ¤**:
1. `.raven/state/memory/working.json` ì½ê¸°
2. `session_id`ê°€ nullì´ ì•„ë‹ˆë©´ í™œì„± ì„¸ì…˜ ì¡´ì¬
3. ì‚¬ìš©ìì—ê²Œ ì¬ê°œ ì—¬ë¶€ í™•ì¸
4. ì¬ê°œ ì‹œ `last_activity` ê°±ì‹ í•˜ê³  ê³„ì†

**ì¬ê°œ ì •ë³´ í‘œì‹œ**:
```
ğŸ“‚ ì´ì „ ì„¸ì…˜ ë°œê²¬

íƒœìŠ¤í¬: {task_id}
ì—ì´ì „íŠ¸: {agent}
ì‹œì‘: {started_at}
ë§ˆì§€ë§‰ í™œë™: {last_activity}

ì§„í–‰ ìƒí™©:
{plan.steps í‘œì‹œ}

ì´ì „ ì„¸ì…˜ì„ ì¬ê°œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
```

---

## decision-log

ì˜ì‚¬ê²°ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ì¤‘ìš”í•œ ê¸°ìˆ ì /ì„¤ê³„ì  ê²°ì • ì‹œ

**í”„ë¡œì„¸ìŠ¤**:
1. `.raven/state/memory/decisions/{task_id}.json` í™•ì¸
2. ì—†ìœ¼ë©´ ìƒì„±, ìˆìœ¼ë©´ ë¡œë“œ
3. ìƒˆ ê²°ì • ì¶”ê°€
4. ì €ì¥

**ê²°ì • ê¸°ë¡ êµ¬ì¡°**:
```json
{
  "id": {auto_increment},
  "timestamp": "ISO timestamp",
  "decision": "ê²°ì • ë‚´ìš©",
  "rationale": "ê²°ì • ì´ìœ ",
  "alternatives": [
    {"option": "ëŒ€ì•ˆ", "rejected_reason": "ê±°ë¶€ ì´ìœ "}
  ],
  "impact": "low" | "medium" | "high"
}
```

**ê¸°ë¡í•´ì•¼ í•  ê²°ì • ì˜ˆì‹œ**:
- ë¼ì´ë¸ŒëŸ¬ë¦¬/í”„ë ˆì„ì›Œí¬ ì„ íƒ
- ì•„í‚¤í…ì²˜ íŒ¨í„´ ì„ íƒ
- ë°ì´í„° êµ¬ì¡° ì„¤ê³„
- API ì„¤ê³„ ê²°ì •
- íŠ¸ë ˆì´ë“œì˜¤í”„ ì„ íƒ

---

## dialogue-save

ì„¸ì…˜ì˜ ëŒ€í™” ìš”ì•½ì„ ì €ì¥í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ì„¸ì…˜ ì¢…ë£Œ ì‹œ ë˜ëŠ” ì¤‘ìš” ëŒ€í™” í›„

**í”„ë¡œì„¸ìŠ¤**:
1. `.raven/state/dialogue/{task_id}.json` í™•ì¸
2. ì—†ìœ¼ë©´ ìƒì„±, ìˆìœ¼ë©´ ë¡œë“œ
3. ìƒˆ ëŒ€í™” ìš”ì•½ ì¶”ê°€
4. ì €ì¥

**ëŒ€í™” ê¸°ë¡ êµ¬ì¡°**:
```json
{
  "session_id": "{working.session_id}",
  "started_at": "ISO timestamp",
  "ended_at": "ISO timestamp",
  "summary": "ì„¸ì…˜ ìš”ì•½ (1-2ë¬¸ì¥)",
  "key_exchanges": [
    {
      "user": "ì‚¬ìš©ì ìš”ì²­ ìš”ì•½",
      "agent": "ì—ì´ì „íŠ¸ ì‘ë‹µ ìš”ì•½",
      "outcome": "ê²°ê³¼/ì˜í–¥"
    }
  ],
  "outcomes": ["ì™„ë£Œëœ ì‘ì—…ë“¤"]
}
```

---

## session-end

ì„¸ì…˜ì„ ì •ìƒ ì¢…ë£Œí•˜ê³  ëª¨ë“  ìƒíƒœë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **:
- íƒœìŠ¤í¬ ì™„ë£Œ ì‹œ
- ì‚¬ìš©ìê°€ ì¢…ë£Œ ìš”ì²­ ì‹œ
- ì—ì´ì „íŠ¸ ì „í™˜(í•¸ë“œì˜¤í”„) ì‹œ

**í”„ë¡œì„¸ìŠ¤**:
1. `working.json` ìµœì¢… ìƒíƒœ ì €ì¥
2. `belief.json` í•™ìŠµ ë‚´ìš© ë°˜ì˜
3. `dialogue/{task_id}.json`ì— ì„¸ì…˜ ìš”ì•½ ì¶”ê°€
4. í•¸ë“œì˜¤í”„ì¸ ê²½ìš° `working.handoff` ì‘ì„±
5. íƒœìŠ¤í¬ ì™„ë£Œì¸ ê²½ìš° `working.json` ì´ˆê¸°í™”

---

## handoff-write

ë‹¤ìŒ ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ í•¸ë“œì˜¤í”„ ë…¸íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ì—ì´ì „íŠ¸ ì „í™˜ ì‹œ

**í”„ë¡œì„¸ìŠ¤**:
1. `working.json`ì˜ `handoff` í•„ë“œì— ì‘ì„±
2. ë‹¤ìŒ ì—ì´ì „íŠ¸ê°€ ì•Œì•„ì•¼ í•  ì •ë³´ í¬í•¨

**í•¸ë“œì˜¤í”„ êµ¬ì¡°**:
```json
{
  "from_agent": "raven-coding",
  "to_agent": "raven-tester",
  "timestamp": "ISO timestamp",
  "context": "í˜„ì¬ ìƒíƒœ ìš”ì•½",
  "completed": ["ì™„ë£Œëœ ì‘ì—…ë“¤"],
  "pending": ["ë‚¨ì€ ì‘ì—…ë“¤"],
  "notes": ["ì°¸ê³ ì‚¬í•­"],
  "files_to_check": ["í™•ì¸í•´ì•¼ í•  íŒŒì¼ë“¤"]
}
```

---

## handoff-read

ì´ì „ ì—ì´ì „íŠ¸ì˜ í•¸ë“œì˜¤í”„ ë…¸íŠ¸ë¥¼ ì½ìŠµë‹ˆë‹¤.

**ì‚¬ìš© ì‹œì **: ì—ì´ì „íŠ¸ ì‹œì‘ ì‹œ í•¸ë“œì˜¤í”„ê°€ ìˆëŠ” ê²½ìš°

**í”„ë¡œì„¸ìŠ¤**:
1. `working.json`ì˜ `handoff` í•„ë“œ í™•ì¸
2. ìˆìœ¼ë©´ ë‚´ìš© íŒŒì‹± ë° í‘œì‹œ
3. ì»¨í…ìŠ¤íŠ¸ íŒŒì•… í›„ ì‘ì—… ì‹œì‘

---

## í†µí•© ì›Œí¬í”Œë¡œìš°

### ì—ì´ì „íŠ¸ ì‹œì‘ ì‹œ

```
1. working-load â†’ ì´ì „ ì„¸ì…˜ í™•ì¸
   â”œâ”€ ìˆìœ¼ë©´ â†’ ì¬ê°œ ì—¬ë¶€ í™•ì¸
   â””â”€ ì—†ìœ¼ë©´ â†’ ìƒˆ ì„¸ì…˜
2. belief-load â†’ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ ë³µì›
3. handoff-read â†’ í•¸ë“œì˜¤í”„ í™•ì¸ (ìˆìœ¼ë©´)
4. working-init â†’ ìƒˆ ì„¸ì…˜ ì´ˆê¸°í™” (ìƒˆ ì„¸ì…˜ì¸ ê²½ìš°)
```

### ì‘ì—… ì¤‘

```
1. working-update â†’ ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë§¤ ë‹¨ê³„)
2. belief-update â†’ ìƒˆ ì§€ì‹ ë°˜ì˜ (í•„ìš”ì‹œ)
3. decision-log â†’ ì¤‘ìš” ê²°ì • ê¸°ë¡ (ê²°ì • ì‹œ)
```

### ì—ì´ì „íŠ¸ ì¢…ë£Œ ì‹œ

```
1. working-update â†’ ìµœì¢… ìƒíƒœ ì €ì¥
2. dialogue-save â†’ ì„¸ì…˜ ëŒ€í™” ìš”ì•½
3. belief-update â†’ í•™ìŠµ ë‚´ìš© ë°˜ì˜
4. handoff-write â†’ í•¸ë“œì˜¤í”„ ë…¸íŠ¸ (ì „í™˜ ì‹œ)
5. session-end â†’ ì„¸ì…˜ ì •ë¦¬
```
